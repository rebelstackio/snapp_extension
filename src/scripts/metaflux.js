!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){class n extends window.HTMLElement{constructor(){super()}_appendContent(){const t=this.render();this.root?"string"==typeof t?this.root.innerHTML+=t:this.root.appendChild(t):"string"==typeof t?this.innerHTML+=t:this.appendChild(t)}}t.exports={MetaBase:n}},function(t,e,n){(function(e){(()=>{const n={};function o(t,n){const o=document.createElement(t);return Object.keys(n).forEach(t=>{const r=n[t];"attributes"===t?o.setAttributes(r):"classList"===t?o.classList.add(...r):"content"===t?function t(n,o){n instanceof HTMLElement?o.appendChild(n):"function"==typeof n?t(n(),o):n instanceof Array?o.append(...n):n.content&&n.events?(!function(t){if(!e.storage)throw new TypeError("CustomElements.handleStoreEvents: storage is not defined, this must be defined <global | window>.storage level");Object.keys(t).forEach(n=>{e.storage.on(n,t[n])})}(n.events),t(n.content,o)):o.innerHTML+=n}(r,o):o[t]=r}),o}["H1","H2","H3","H4","H5","H6","Div","Span","Ol","Ul","Li","Table","Thead","Tbody","Tfoot","Tr","Td","Th","Form","Label","Input","TextArea","Button","Img","Picture","Source","Select","Option","P","A","Section","Video"].forEach(t=>{n[t]=function(e,n){return e=function(t,e){return(t=t||{}).content=e||"",t}(e,n),o(t.toLowerCase(),e)}}),t.exports=Object.assign({},{HTMLElementCreator:o},n)})()}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){const{MetaComponent:o}=n(4),{MetaContainer:r}=n(5),{MetaShadowComponent:s}=n(6),i=n(7),c=n(1);n(9),t.exports=Object.assign({},{MetaComponent:o,MetaContainer:r,MetaShadowComponent:s,Store:i},c)},function(t,e,n){const{MetaBase:o}=n(0);t.exports={MetaComponent:class extends o{constructor(t=!1){if(super(),!this.render)throw new TypeError("render method required on MetaComponents");t&&(this.storage=t),this.render=this.render.bind(this),this.addListeners&&(this.addListeners=this.addListeners.bind(this))}connectedCallback(){this._appendContent(),this.addListeners&&this.addListeners(),this.storage&&this.mapStoreEvents()}handleStoreEvents(){if(this.storage)throw new TypeError('MetaComponent.handleStoreEvents: This function expects to be overwritten by child object, otherwise do not pass "storage" object as argument to constructor.')}mapStoreEvents(){const t=this.handleStoreEvents();for(const e in t)t.hasOwnProperty(e)&&this.storage.on(e,t[e])}}}},function(t,e,n){const{MetaBase:o}=n(0);t.exports={MetaContainer:class extends o{constructor(){if(super(),!this.render)throw new TypeError("render method is require for MetaContainers")}connectedCallback(){this._appendContent()}}}},function(t,e){class n extends window.HTMLElement{constructor(t=!1){super(),t&&(this.storage=t),this.addListeners=this.addListeners.bind(this),this.render=this.render.bind(this)}connectedCallback(){this.root=this.shadowRoot||this.attachShadow({mode:"open"}),this.root.innerHTML=`\n\t\t<style>\n\t\t\t${this.styles.map(t=>`\n\t\t\t@import url("${t}");\n\t\t\t`).join("")}\n\t\t</style>\n\t\t`;const t=this.render();"string"==typeof t?this.root.innerHTML+=t:this.root.appendChild(t),this.addListeners(),this.storage&&this.mapStoreEvents()}handleStoreEvents(){if(this.storage)throw new TypeError('MetaComponent.handleStoreEvents: This function expects to be overwritten by child object, otherwise do not pass "storage" object as argument to constructor.')}mapStoreEvents(){const t=this.handleStoreEvents();for(const e in t)t.hasOwnProperty(e)&&this.storage.on(e,t[e])}}t.exports={MetaShadowComponent:n}},function(t,e,n){"use strict";const o=n(8);class r extends o{static clone(t,e,n){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);void 0===e&&(e=[],n=[]);let o,s=e.length;for(o=0;o<s;o++)if(t===e[o])return n[o];if("[object Array]"==Object.prototype.toString.call(t)){let o=t.slice();e.push(t),n.push(o);let s=o.length;for(;s--;)o[s]=r.clone(o[s],e,n);return o}let i=Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__;i||(i=t.constructor.prototype);let c=Object.create(i);e.push(t),n.push(c);for(let o in t)c[o]=r.clone(t[o],e,n);return c}constructor(t,e,...n){super();let o,s=e||{},i=r.clone(t)||{};n=n||[];const c=function(t){if(s[t.type]){let e=s[t.type](t,r.clone(i));e.newState&&(i=r.clone(e.newState)),this.emit(t.type,e,t)}else this.emit(t.type,t);t.cb&&"function"==typeof t.cb&&t.cb(i)};let a=function(t,e,n){return t?n?function(o){return next=n.bind(e,o),t}.bind(e):function(e){return next=c.bind(this,e),t}.bind(e):c.bind(this)};this.getState=function(){return r.clone(i)},this.getHandlers=function(){return s},this.addHandler=function(t,e){s[t]=e},this.dispatch=function(t){o(t)};let u=0;const f={getState:this.getState,dispatch:this.dispatch};do{a=a.bind(this),o=a(n[u],f,n[u+1])}while(++u<n.length)}}t.exports=r},function(t,e,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function s(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function c(t,e,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new i(n,o||t,s),a=r?r+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],c]:t._events[a].push(c):(t._events[a]=c,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,i=new Array(s);o<s;o++)i[o]=n[o].fn;return i},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,s,i){var c=r?r+t:t;if(!this._events[c])return!1;var a,u,f=this._events[c],p=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),p){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,o),!0;case 5:return f.fn.call(f.context,e,n,o,s),!0;case 6:return f.fn.call(f.context,e,n,o,s,i),!0}for(u=1,a=new Array(p-1);u<p;u++)a[u-1]=arguments[u];f.fn.apply(f.context,a)}else{var h,l=f.length;for(u=0;u<l;u++)switch(f[u].once&&this.removeListener(t,f[u].fn,void 0,!0),p){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,e);break;case 3:f[u].fn.call(f[u].context,e,n);break;case 4:f[u].fn.call(f[u].context,e,n,o);break;default:if(!a)for(h=1,a=new Array(p-1);h<p;h++)a[h-1]=arguments[h];f[u].fn.apply(f[u].context,a)}}return!0},u.prototype.on=function(t,e,n){return c(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return c(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,o){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var i=this._events[s];if(i.fn)i.fn!==e||o&&!i.once||n&&i.context!==n||a(this,s);else{for(var c=0,u=[],f=i.length;c<f;c++)(i[c].fn!==e||o&&!i[c].once||n&&i[c].context!==n)&&u.push(i[c]);u.length?this._events[s]=1===u.length?u[0]:u:a(this,s)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},function(t,e,n){(function(t){(()=>{const e=n(1);Object.keys(e).forEach(t=>{HTMLElement.prototype[t]=function(n,o){const r=e[t](n,o);return this.appendChild(r),r}}),HTMLElement.prototype.onStoreEvent=function(e,n,o=!1){const r=o||"storage";if(!t[r])throw new TypeError(`CustomElements.onStoreEvent: ${r} is not defined, this must be defined <global | window>.${r} level`);t[r].on(e,()=>{n(t[r].getState(),this)})},HTMLElement.prototype.baseNode=function(){return null===this.parentElement?this:this.parentElement.baseNode()},HTMLElement.prototype.setAttributes=function(t){Object.keys(t).forEach(e=>{this.setAttribute(e,t[e])})}})()}).call(this,n(2))}])}));
//# sourceMappingURL=metaflux.js.map